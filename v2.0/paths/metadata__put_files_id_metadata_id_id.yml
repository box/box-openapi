---
operationId: put_files_id_metadata_id_id

summary: Update metadata on file

tags:
  - File & Folder Metadata

x-box-reference-category: metadata

description: |-
  Updates a piece of metadata on a file based.

  The metadata instance can only be updated if the instance
  already exists. When editing metadata, only values that adhere to the
  metadata template schema will be accepted.

  The update is applied atomically. If any errors occur during the
  application of the operations, the metadata instance remains unchanged.

parameters:
  - $ref: '../attributes/file_id.yml'
  - $ref: '../attributes/metadata_scope.yml'
  - $ref: '../attributes/metadata_template.yml'

requestBody:
  content:
    application/json:
      schema:
        $ref: '#/components/schemas/MetadataPatch'

responses:
  200:
    description: |-
      Returns the updated metadata template instance, with the
      custom template data included.
    content:
      application/json:
        schema:
          $ref: '#/components/schemas/Metadata'

  409:
    description: |-
      If the piece of metadata already exists, a conflict error
      will be returned. The metadata can then instead be updated with the
      `put` method.
    content:
      application/json:
        schema:
          $ref: '#/components/schemas/ClientError'

  default:
    description: Generic client error
    content:
      application/json:
        schema:
          $ref: '#/components/schemas/ClientError'
